# 內容頁施工計畫 TODO List

## 概述

本計畫將實現與原專案 `moedict-webkit` 完全相同的字典內容頁面功能，包括字詞顯示、注音拼音、朗讀功能、部首筆畫、筆順動畫等。

## ✅ 已完成項目

- [x] **基本字典頁面結構** - 實現基本的 Preact 組件和 HTML 結構
- [x] **字典內容顯示** - 基本顯示字典條目、定義、例句
- [x] **跨語言對照** - 顯示不同語言版本的對照
- [x] **翻譯功能** - 顯示英文、德文、法文翻譯

## 🔄 進行中項目

無

## 📋 待完成項目

### 1. 查詢的主字右邊的注音和下面的拼音

- [ ] **注音符號顯示**
  - [ ] 實現注音符號 (ㄅㄆㄇㄈ) 顯示
  - [ ] 應用正確的 CSS 類名 (`.bopomofo`)
  - [ ] 處理聲調標記 (ˊˇˋ˙)
  - [ ] 參考原專案檔案: `view.ls` 第132-316行, `decorate-ruby` 函數

- [ ] **拼音顯示**
  - [ ] 實現羅馬拼音顯示
  - [ ] 支援多種拼音系統：
    - [ ] 華語: 漢語拼音、華通拼音、威妥瑪式、注音二式
    - [ ] 台語: 臺羅拼音、臺通拼音、白話字
    - [ ] 客語: 客家語拼音方案、客語白話字
  - [ ] 應用正確的 CSS 類名 (`.pinyin`)
  - [ ] 參考原專案檔案: `view.ls` 第435-467行, `convert-pinyin` 函數

- [ ] **Ruby 標註**
  - [ ] 實現 `<ruby>` 標籤顯示
  - [ ] 處理 `<rb>` 和 `<rt>` 標籤
  - [ ] 支援多種標註方式 (注音、拼音、並列顯示)
  - [ ] 參考原專案檔案: `view.ls` 第250-316行

### 2. 朗讀按鈕

- [ ] **朗讀按鈕實現**
  - [ ] 添加朗讀按鈕圖示 (`icon-play`)
  - [ ] 實現點擊播放功能
  - [ ] 支援不同語言的音檔格式：
    - [ ] 華語: `.ogg` 格式
    - [ ] 台語: `.ogg` 格式
    - [ ] 客語: `.ogg` 格式 (多種腔調)
  - [ ] 參考原專案檔案: `view.ls` 第114-148行
	- [ ] 音檔對照檔案應是 `dict-concised.audio.json`

- [ ] **音檔載入**
  - [ ] 實現音檔 URL 生成邏輯
  - [ ] 處理不同語言的音檔路徑：
    - [ ] 華語: `a.moedict.tw/{audio_id}.ogg`
    - [ ] 台語: `t.moedict.tw/{basename}.ogg`
    - [ ] 客語: `h.moedict.tw/{variant}-{audio_id}.ogg`
  - [ ] 實現音檔載入失敗處理
  - [ ] 參考原專案檔案: `view.ls` 第140-148行

- [ ] **語音合成 (TTS)**
  - [ ] 實現瀏覽器語音合成 API
  - [ ] 支援多語言語音合成：
    - [ ] 英文: `en-US`
    - [ ] 法文: `fr-FR`
    - [ ] 德文: `de-DE`
  - [ ] 參考原專案檔案: `view.ls` 第73-83行

### 3. 部首及筆畫區

- [ ] **部首顯示**
  - [ ] 實現部首字形顯示
  - [ ] 顯示部首名稱
  - [ ] 應用正確的 CSS 類名 (`.radical`)
  - [ ] 參考原專案檔案: `view.ls` 第49-57行

- [ ] **筆畫數顯示**
  - [ ] 顯示總筆畫數
  - [ ] 顯示非部首筆畫數
  - [ ] 顯示計算公式 (部首筆畫 + 非部首筆畫 = 總筆畫)
  - [ ] 應用正確的 CSS 類名 (`.count`)
  - [ ] 參考原專案檔案: `view.ls` 第52-56行

- [ ] **部首檢索連結**
  - [ ] 實現部首檢索功能
  - [ ] 連結到部首表頁面 (`#@`)
  - [ ] 應用正確的 CSS 類名 (`.xref`)
  - [ ] 參考原專案檔案: `view.ls` 第525-533行, `RadicalGlyph` 組件

### 4. 筆順動畫按鈕及顯示

- [ ] **筆順按鈕**
  - [ ] 實現筆順動畫按鈕 (`icon-pencil`)
  - [ ] 添加點擊事件處理
  - [ ] 應用正確的 CSS 類名和樣式
  - [ ] 參考原專案檔案: `view.ls` 第48行, `index.html` 第169-197行

- [ ] **筆順動畫容器**
  - [ ] 實現筆順動畫顯示區域 (`#strokes`)
  - [ ] 支援多種字體樣式：
    - [ ] 楷書、篆書、隸書、行書、草書、金文
  - [ ] 實現動畫播放控制
  - [ ] 參考原專案檔案: `view.ls` 第172-196行

- [ ] **筆順資料載入**
  - [ ] 實現筆順資料 API 調用
  - [ ] 處理筆順資料格式 (JSON)
  - [ ] 實現筆順 GIF 動畫載入
  - [ ] 參考原專案檔案: `view.ls` 第174-179行

- [ ] **歷代書體功能**
  - [ ] 實現「歷代書體」按鈕
  - [ ] 顯示不同歷史時期的字體
  - [ ] 實現字體選用功能
  - [ ] 參考原專案檔案: `view.ls` 第169-197行

### 5. 詞性標記 (名詞、動詞、形容詞、副詞)

- [ ] **詞性標記顯示**
  - [ ] 實現紅底白字的詞性標記
  - [ ] 支援的詞性類型：
    - [ ] 名詞 (`名`)
    - [ ] 動詞 (`動`)
    - [ ] 形容詞 (`形`)
    - [ ] 副詞 (`副`)
    - [ ] 介詞 (`介`)
    - [ ] 代詞 (`代`)
    - [ ] 助詞 (`助`)
    - [ ] 嘆詞 (`歎`)
  - [ ] 應用正確的 CSS 類名 (`.part-of-speech`)
  - [ ] 參考原專案檔案: `view.ls` 第473-479行, `DefinitionList` 組件

- [ ] **詞性標記樣式**
  - [ ] 實現紅底白字的視覺效果
  - [ ] 確保標記的可讀性和美觀性
  - [ ] 處理多個詞性的並列顯示
  - [ ] 參考原專案檔案: `sass/_theme.scss` 相關樣式

- [ ] **詞性資料處理**
  - [ ] 從字典資料中提取詞性資訊
  - [ ] 處理詞性標記的解析邏輯
  - [ ] 實現詞性標記的動態生成
  - [ ] 參考原專案檔案: `view.ls` 第473-479行

### 6. 其他內容頁功能

- [ ] **例句和引文**
  - [ ] 實現例句顯示 (`.example`)
  - [ ] 實現引文顯示 (`.quote`)
  - [ ] 處理例句的格式化和樣式
  - [ ] 參考原專案檔案: `view.ls` 第490-522行, `Definition` 組件

- [ ] **同義詞和反義詞**
  - [ ] 實現同義詞顯示 (`.synonyms`)
  - [ ] 實現反義詞顯示 (`.antonyms`)
  - [ ] 實現異體字顯示 (`.variants`)
  - [ ] 應用正確的標籤 (似、反、異)
  - [ ] 參考原專案檔案: `view.ls` 第481-488行, `decorate-nyms` 函數

- [ ] **定義格式化**
  - [ ] 實現定義的 HTML 格式化
  - [ ] 處理內部連結 (`<a>` 標籤)
  - [ ] 實現定義編號和標記
  - [ ] 參考原專案檔案: `view.ls` 第654-665行, `expand-def` 函數

- [ ] **特殊標記處理**
  - [ ] 實現區域標記 (`.regional`)
  - [ ] 實現特定標記 (`.specific`)
  - [ ] 實現變體標記 (`.variant`)
  - [ ] 參考原專案檔案: `view.ls` 第612-639行, `h` 函數

## 📁 相關檔案清單

### 原專案參考檔案
- `moedict-webkit/view.ls` - 主要 React 組件和邏輯
- `moedict-webkit/index.html` - HTML 結構參考
- `moedict-webkit/sass/_theme.scss` - 樣式定義
- `moedict-webkit/js/jquery.strokeWords.js` - 筆順動畫庫
- `moedict-webkit/bin/` - 筆順資料檔案

### 新專案需要創建的檔案
- `cf-moedict-webkit/src/dictionary-content.tsx` - 字典內容組件
- `cf-moedict-webkit/src/phonetics-component.tsx` - 注音拼音組件
- `cf-moedict-webkit/src/audio-component.tsx` - 朗讀功能組件
- `cf-moedict-webkit/src/radical-component.tsx` - 部首筆畫組件
- `cf-moedict-webkit/src/stroke-animation.tsx` - 筆順動畫組件
- `cf-moedict-webkit/src/part-of-speech.tsx` - 詞性標記組件

### 需要研究的技術
- [ ] **筆順資料格式** - 研究原專案的筆順資料存儲格式
- [ ] **音檔載入機制** - 研究音檔的載入和播放機制
- [ ] **Ruby 標註技術** - 研究 HTML5 Ruby 標註的實現
- [ ] **語音合成 API** - 研究瀏覽器語音合成 API 的使用

---

**計畫版本**: v1.0
**創建日期**: 2025-10-13
**最後更新**: 2025-10-13
