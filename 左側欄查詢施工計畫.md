# 左側欄查詢施工計畫

## 目標概述

依照原專案結構，實作左側欄查詢功能，包含：
- 固定左側的搜尋欄（query-box）
- 搜尋輸入框（支援 autocomplete）
- 查詢功能整合到路由系統
- 響應式設計（手機版隱藏或調整）

## 參考原專案結構

### HTML 結構（index.html）
```html
<div id="query-box" class="query-box">
  <input id="query" type="search" autofocus autocomplete="off" placeholder="請輸入欲查詢的字詞" class="query">
</div>
```

### CSS 樣式（_theme.scss）
- `.query-box`: 固定左側，寬度 260px，從 top: 45px 到底部
- `input.query`: 全寬輸入框，字體大小 1.2em
- 手機版（max-width: 767px）隱藏或調整位置

### JavaScript 功能（main.ls）
- `fill-query`: 從 hash 路由填充輸入框
- `lookup`: 處理查詢邏輯
- autocomplete 功能（jQuery UI）
- 監聽 keyup/change/keypress/keydown/input 事件

## 施工步驟

### 1. 建立左側欄組件

- [ ] 創建 `src/components/sidebar/Sidebar.tsx`
  - 固定左側布局（position: fixed）
  - 寬度 260px
  - 從導航列下方（top: 45px）開始
  - 響應式設計（手機版隱藏或調整）

### 2. 實作搜尋輸入框

- [ ] 創建 `src/components/sidebar/SearchBox.tsx`
  - 輸入框組件（type="search"）
  - 支援 autofocus（桌面版）
  - placeholder: "請輸入欲查詢的字詞"
  - 整合 router 進行導航

### 3. 實作查詢功能

- [ ] 創建 `src/hooks/useSearch.ts`
  - 處理輸入值變化
  - 支援 autocomplete（可選，後續實作）
  - 整合路由系統
  - 處理語言前綴（'、!、:、~）

### 4. 整合到 MainLayout

- [ ] 修改 `src/layouts/MainLayout.tsx`
  - 在 layout 中加入 Sidebar 組件
  - 確保與 router 整合
  - 響應式處理（手機版行為）

### 5. 樣式整合

- [ ] 複製原專案 CSS 樣式
  - `.query-box` 樣式
  - `input.query` 樣式
  - 響應式斷點調整
  - 手機版隱藏邏輯

### 6. 功能測試

- [ ] 測試基本查詢功能
  - 輸入字詞後導航
  - 語言前綴處理
  - 路由同步（URL 更新時輸入框更新）

- [ ] 測試響應式設計
  - 桌面版顯示正常
  - 手機版隱藏或調整

- [ ] 測試整合
  - 與 Navbar 不衝突
  - 與主內容區域不重疊
  - 路由切換時輸入框狀態正確

## 技術細節

### 路由整合
- 使用 `useRouter()` hook 獲取當前路由
- 監聽路由變化，更新輸入框值
- 輸入提交時使用 `router.navigate()` 導航

### 語言前綴處理
- `'` 或 `!`: 台語（t）
- `:`: 客語（h）
- `~`: 兩岸（c）
- 無前綴: 華語（a）

### 響應式設計
- 桌面版（>= 768px）: 固定左側顯示
- 手機版（< 768px）: 隱藏或調整為頂部輸入框

## 驗收標準

- [ ] 左側欄在桌面版正確顯示
- [ ] 搜尋輸入框功能正常
- [ ] 輸入後能正確導航到對應詞條
- [ ] 路由變化時輸入框值同步更新
- [ ] 手機版響應式設計正常
- [ ] 與現有組件無衝突
- [ ] 樣式與原專案一致

